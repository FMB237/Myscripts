#!/bin/bash

SERVICE_OLLAMA="ollama"
SERVICE_WEBUI="open-webui"

case "$1" in
  start)
    echo "‚ñ∂ Enabling & starting Ollama..."
    sudo snap enable $SERVICE_OLLAMA
    sudo snap start $SERVICE_OLLAMA
    echo "‚úÖ Ollama is running."
    ;;
  
  start-ui)
    echo "‚ñ∂ Enabling & starting Ollama..."
    sudo snap enable $SERVICE_OLLAMA
    sudo snap start $SERVICE_OLLAMA

    echo "‚ñ∂ Enabling & starting Open WebUI..."
    sudo snap enable $SERVICE_WEBUI
    sudo snap start $SERVICE_WEBUI

    echo "üåê Open WebUI available at http://localhost:3000"
    ;;
  
  stop)
    echo "‚èπ Stopping Ollama..."
    sudo snap stop $SERVICE_OLLAMA
    ;;
  
  stop-ui)
    echo "‚èπ Stopping & disabling Open WebUI..."
    sudo snap stop $SERVICE_WEBUI
    sudo snap disable $SERVICE_WEBUI
    echo "‚èπ Stopping Ollama..."
    sudo snap stop $SERVICE_OLLAMA
    ;;
  
  status)
    echo "üìä AI services status:"
    snap services | grep -E "ollama|open-webui"
    ;;
  
  *)
    echo "Usage: $0 {start|start-ui|stop|stop-ui|status}"
    echo
    echo "Commands:"
    echo "  start     ‚Üí Ollama only (low RAM)"
    echo "  start-ui  ‚Üí Ollama + Open WebUI"
    echo "  stop      ‚Üí Stop Ollama"
    echo "  stop-ui   ‚Üí Stop & disable Open WebUI + stop Ollama"
    echo "  status    ‚Üí Show services state"
    exit 1
    ;;
esac
